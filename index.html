<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Screen Time Widget Prototype</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="description" content="Prototype of an adaptive, emotion-driven screen time widget with learning overlays." />
</head>
<body>
  <!--
    HOW TO USE
    1) Put your iPhone frame PNG at images/iphone_frame.png
    2) Press Play to simulate. Use +5m to jump.
    3) Overlays appear at thresholds t_minus, t_zero, t_plus.
    4) Learning + day demo lives in localStorage (keys: stw_*).
  -->

  <main class="page">
    <header class="topbar">
      <h1>Screen Time Widget
        <span class="chip chip--muted" id="dayChip">Day <span id="dayChipValue">1</span></span>
      </h1>
      <!-- settings button removed -->
    </header>

    <section class="frame-wrap">
      <!-- iPhone frame -->
      <div class="phone-frame">
        <div class="phone-frame__image" aria-hidden="true"></div>

        <!-- Screen viewport inside the frame -->
        <div class="phone-screen" id="phoneScreen" role="region" aria-label="Phone screen viewport">
          <!-- Widget card -->
          <div class="widget-card">
            <div class="widget-header">
              <div class="widget-title">
                <span class="dot"></span>
                <h2>Today vs Yesterday</h2>
              </div>
              <div class="activity">
                <label for="activity">Activity</label>
                <select id="activity">
                  <option value="shortform">Short-form video</option>
                  <option value="streaming">Streaming</option>
                  <option value="gaming">Gaming</option>
                  <option value="social">Social</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>

            <div class="stats">
              <div class="stat">
                <div class="label">Today</div>
                <div class="value" id="todayValue">0h 00m</div>
                <div class="sub" id="todaySub">0 min</div>
              </div>
              <div class="divider"></div>
              <div class="stat">
                <div class="label">Yesterday</div>
                <div class="value" id="yesterdayValue">3h 50m</div>
                <div class="sub" id="yesterdaySub">230 min</div>
              </div>
            </div>

            <div class="progress">
              <div class="progress-top">
                <div>Progress to yesterday</div>
                <div id="progressPct">0%</div>
              </div>
              <div class="bar">
                <div class="bar-fill" id="progressBar"></div>
              </div>
              <div class="legend">
                <span id="deltaToYesterday">230 min left</span>
                <span id="avg7Label">7-day avg: 4h 05m</span>
              </div>
            </div>

            <div class="controls">
              <button class="btn" id="playPauseBtn" aria-label="Play or pause">Play</button>
              <button class="btn" id="add5Btn" aria-label="Add five minutes">+5m</button>
              <button class="btn ghost" id="detailsBtn" aria-label="Details">Details</button>
            </div>
          </div>

          <!-- Overlay (nudge) -->
          <div class="overlay" id="overlay" aria-live="polite" aria-hidden="true">
            <div class="overlay-card" role="dialog" aria-modal="true" aria-labelledby="overlayTitle">
              <div class="overlay-kicker" id="overlayKicker">Motivational • Sleep</div>
              <h3 id="overlayTitle">You are 10 min away from yesterday</h3>
              <p id="overlayBody">Pause now and skip the “lost time” feeling.</p>
              <div class="overlay-actions">
                <button class="btn primary" id="ctaPause">Pause now</button>
                <button class="btn" id="ctaLater">Later</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right rail: Simulation panel -->
      <aside class="panel">
        <h3>Simulation <span class="chip" id="dayLabelSide">Day 1</span></h3>

        <div class="row">
          <label>Yesterday (min)</label>
          <input type="number" id="yesterdayInput" min="0" step="5" value="230" />
        </div>
        <div class="row">
          <label>Today (min)</label>
          <input type="number" id="todayInput" min="0" step="5" value="0" />
        </div>
        <div class="row">
          <label>7-day avg (min)</label>
          <input type="number" id="avg7Input" min="0" step="5" value="245" />
        </div>
        <div class="row cols">
          <div>
            <label>t-minus (min)</label>
            <input type="number" id="tMinusInput" min="0" step="1" value="15" />
          </div>
          <div>
            <label>t-plus (min)</label>
            <input type="number" id="tPlusInput" min="0" step="1" value="15" />
          </div>
        </div>
        <div class="row">
          <label>Time of day</label>
          <select id="todInput">
            <option value="morning">Morning</option>
            <option value="afternoon">Afternoon</option>
            <option value="evening" selected>Evening</option>
          </select>
        </div>

        <!-- Day controls -->
        <div class="row inline">
          <label class="checkbox">
            <input type="checkbox" id="carryCheckbox" checked />
            <span>Carry yesterday = today</span>
          </label>
        </div>
        <div class="row">
          <button class="btn" id="nextDayBtn">Next day ▶︎</button>
        </div>

        <div class="row">
          <button class="btn danger" id="resetLearning">Reset learning</button>
        </div>
        <p class="hint">Learning state is stored in your browser storage only.</p>
      </aside>
    </section>
  </main>

  <!-- Settings drawer removed -->

  <script src="app.js"></script>
</body>
</html>
